{"version":3,"sources":["components/ExportControl.js","components/Header.js","components/LoadControl.js","components/ResetControl.js","components/DemoScene/index.js","components/Main3DView.js","components/TextEngraving.js","components/CaseColourPicker.js","components/CaseSelection.js","components/SearchControl.js","App.js","registerServiceWorker.js","index.js"],"names":["ExportControl","obj_text","lines","split","result","i","mtllib_line","usemtl_line","length","undefined","startsWith","data","obj_parse_pointer","this_pointer","file_name","hex","obj_info","is_empty","Object","entries","constructor","obj_file_name","mtl_file_name","material_name","endsWith","trim","zip","AdmZip","content","addFile","Buffer","alloc","mtl_content","rgb","props","chosen_case_colour","exec","r","parseInt","g","b","substr","file","File","toBuffer","type","FileSaver","saveAs","this","chosen_3d_format","handle_data_pointer","handle_data","obj_parse","chosen_phone_case","indexOf","obj_base64","atob","url","window","location","href","replace","fetch","then","response","text","alert","_this","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","onChange","on3DFormatSelect","value","style","backgroundImage","backgroundRepeat","export_3d_formats","map","format","key","ref","onClick","clickHandler","React","Component","Header","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","showMenu","bind","assertThisInitialized","closeMenu","event","_this2","preventDefault","setState","document","addEventListener","_this3","dropdownMenu","contains","target","removeEventListener","_this4","react_default","src","alt","element","LoadControl","fileExtension","mtl_parse","mtl_text","materials","next_name","next_color","substring","console","log","JSON","stringify","on_obj_load","e","btoa","obj_reader","step","on3DFileLoad","color","app_states","on_mtl_load","mtl_string","mtl_reader","colors","rgb_parts","j","Math","round","parseFloat","toString","handleFiles","files","mtl_ready","obj_ready","obj_order","mtl_order","name","pop","FileReader","onloadend","readAsText","react_file_reader_default","fileTypes","multipleFiles","base64","ResetControl","onResetApp","DemoScene","cameraPosition","THREE","groupRotation","scene","width","height","RenderInfo","assets_path","chosenPhoneCase","refs","resize","innerWidth","React3_default","mainCamera","antialias","shadowMapEnabled","alpha","fov","chosenCaseSize","aspect","near","far","position","lookAt","chosenCaseColor","castShadow","penumbra","intensity","shadowMapWidth","shadowMapHeight","rotation","chosenRotationX","chosenRotationY","build_default","model","objectLoadLogic","group","objectLabelDisplayLogic","Main3DView","getElementById","onZoomChange","onRotationXChange","onRotationYChange","id","min","max","displayed_3d_model_zoom_level","changeSize","components_DemoScene","displayed_3d_model_rotation_x","displayed_3d_model_rotation_y","changeRotationX","changeRotationY","TextEngraving","htmlFor","onEngraveTextChange","engraved","placeholder","CaseColourPicker","displayColorPicker","updated_case_colour","handleClick","handleClose","handleChange","styles","reactCSS","default","borderRadius","background","swatch","padding","boxShadow","display","cursor","popover","zIndex","cover","top","right","bottom","left","react_color_lib","disableAlpha","onChangeComplete","onCaseColourSelect","CaseSelection","caseList","case_list","searchString","filter","phone_case","toLowerCase","includes","searched","onCaseSelect","onClear","SeachControl","onCaseSearch","App","chosen_engraved_text","case_search_string","chosen_export_3d_format","chosen_3d_file_extension","available_export_3d_formats","available_case_models","update3DExportFormat","updateEngravingText","updateCaseColour","updateChosenCase","updateChosen3DFileToLoad","resetApp","updateSearchString","clearSearchString","updateDisplayed3DModelRotationX","updateDisplayed3DModelRotationY","updateDisplayed3DModelZoom","components_Header","components_LoadControl","components_ResetControl","SearchControl","components_CaseSelection","components_Main3DView","components_TextEngraving","components_CaseColourPicker","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","error","ReactDOM","render","src_App","URL","process","origin","concat","status","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.bc65aaca.chunk.js","sourcesContent":["/*This component controls the 3D export format selection and export action.\r\nonChange={props.on3DFormatSelect} updates App.js chosen_export_3d_format value*/\r\n\r\nimport React from 'react';\r\nimport AdmZip from 'adm-zip'\r\nimport FileSaver from 'file-saver'\r\n// var AdmZip = require('adm-zip');\r\n\r\n\r\n\r\nclass ExportControl extends React.Component {\r\n    //constructor(props) {\r\n    //    super(props)\r\n    //}\r\n\r\n\r\n    // extracts the material library and the name of material used\r\n    // within the .obj file\r\n    // this is used in handle_data() function\r\n    obj_parse(obj_text) {\r\n\r\n        let lines = obj_text.split('\\n')\r\n\r\n        let result = {}\r\n        let i = 0\r\n        let mtllib_line = ''\r\n        let usemtl_line = ''\r\n\r\n        while (i < lines.length) {\r\n            while (i < lines.length) {\r\n                if (lines[i] === undefined) {\r\n                    break\r\n                }\r\n                if (lines[i].startsWith('mtllib')) {\r\n                    mtllib_line = lines[i]\r\n                    break\r\n                }\r\n                else {\r\n                    i++\r\n                    continue\r\n                }\r\n            }\r\n            if (mtllib_line !== -1) {\r\n                while (i < lines.length) {\r\n                    if (lines[i] === undefined) {\r\n                        break\r\n                    }\r\n                    if (lines[i].startsWith('usemtl')) {\r\n                        usemtl_line = lines[i]\r\n                        break\r\n                    }\r\n                    else {\r\n                        i++\r\n                        continue\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                break\r\n            }\r\n            if (mtllib_line.length !== 0 && usemtl_line.length !== 0) {\r\n                result['mtllib_line'] = mtllib_line\r\n                result['usemtl_line'] = usemtl_line\r\n                return result\r\n            }\r\n            else {\r\n                return result\r\n            }\r\n        }\r\n        return result\r\n    }\r\n\r\n    handle_data(data, obj_parse_pointer, this_pointer, file_name) {\r\n\r\n        let obj_info = obj_parse_pointer(data)\r\n\r\n        // console.log(obj_info)\r\n\r\n        let is_empty = Object.entries(obj_info).length === 0 && obj_info.constructor === Object\r\n\r\n        // prepare files to be exported (obj and mtl placeholders)\r\n        let obj_file_name = file_name\r\n        let mtl_file_name = ''\r\n        let material_name = ''\r\n\r\n        // form the obj file name\r\n        if (!obj_file_name.endsWith('.obj')) {\r\n            obj_file_name = obj_file_name + '.obj'\r\n        }\r\n\r\n        //convert the hex colour tracked by the App.js (chosen_case_colour)\r\n        // to RGB space, as .mtl file only hold the material colour\r\n        // as RGB colour\r\n        function hexToRgb(hex) {\r\n            var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n            return result ? {\r\n                r: parseInt(result[1], 16),\r\n                g: parseInt(result[2], 16),\r\n                b: parseInt(result[3], 16)\r\n            } : null;\r\n        }\r\n\r\n        // if we dont have an mtl file, we need to create one\r\n        // this entire function is to:\r\n        // - create the mtl file structure\r\n        // - create a zip file\r\n        // - load both mtl and obj files into zip\r\n        // - save the files using FileSaver module to user file system\r\n\r\n        // if we have an obj file and is not empty (protection agains empty download)\r\n        if (!is_empty) {\r\n            // console.log(obj_info.mtllib_line)\r\n            // console.log(obj_info.usemtl_line)\r\n            // console.log(this_pointer.props.chosen_case_colour)\r\n\r\n            // prep the file naming of obj and mtl files\r\n            // based on obj files lines containing reference to material and\r\n            // material library used (research obj file format for understanding)\r\n            mtl_file_name = obj_info.mtllib_line.split('mtllib')[1].trim()\r\n            material_name = obj_info.usemtl_line.split('usemtl')[1].trim()\r\n\r\n            // prepare zip object\r\n            var zip = new AdmZip();\r\n\r\n            // prepare and append .obj file\r\n            var content = data;\r\n            zip.addFile(obj_file_name, Buffer.alloc(content.length, content), \"\");\r\n\r\n            // create new .mtl file to accompany .obj file\r\n            // .mtl file we use App.js chose_case_colour property\r\n            // as converted to rgb\r\n            let mtl_content = ''\r\n            mtl_content += 'newmtl '\r\n            mtl_content += material_name\r\n            mtl_content += '\\n'\r\n            mtl_content += 'Ns 225.000000\\n'\r\n            mtl_content += 'Ka 1.000000 1.000000 1.000000\\n'\r\n            mtl_content += 'Kd '//0.800000 0.777799 0.285769\\n'\r\n            let rgb = hexToRgb(this_pointer.props.chosen_case_colour)\r\n            mtl_content += ('' + rgb.r / 255).substr(0, 8)\r\n            mtl_content += ' '\r\n            mtl_content += ('' + rgb.g / 255).substr(0, 8)\r\n            mtl_content += ' '\r\n            mtl_content += ('' + rgb.b / 255).substr(0, 8)\r\n            mtl_content += '\\n'\r\n            mtl_content += 'Ks 0.500000 0.500000 0.500000\\n'\r\n            mtl_content += 'Ke 0.0 0.0 0.0\\n'\r\n            mtl_content += 'Ni 1.450000\\n'\r\n            mtl_content += 'd 1.000000\\n'\r\n            mtl_content += 'illum 2\\n'\r\n\r\n            // add .mtl file to zip\r\n            zip.addFile(mtl_file_name, Buffer.alloc(mtl_content.length, mtl_content), \"\")\r\n\r\n            // create a file to save as zip file\r\n            // var FileSaver = require('file-saver');\r\n            var file = new File([zip.toBuffer()], \"inkerz_exported_3d_model.zip\", { type: \"text/plain;charset=utf-8\" });\r\n\r\n            // save it to user's default download location (please note: not prompt is supplied)\r\n            FileSaver.saveAs(file);\r\n\r\n        }\r\n\r\n    }\r\n    // when user click to export/save the edited 3D model to local file system\r\n    clickHandler() {\r\n        // exoport is restricted to .obj file type (until more 3d file exporters are developed)\r\n        if (this.props.chosen_3d_format === 'OBJ') {\r\n\r\n            var obj_text = ''\r\n\r\n            var handle_data_pointer = this.handle_data\r\n            var obj_parse_pointer = this.obj_parse\r\n            var this_pointer = this\r\n\r\n            // if we canread the base64 model ascii phone case data (obj URI encoded)\r\n            // as stored in App.js chosen_phone_case property\r\n            if (this.props.chosen_phone_case.indexOf(\"base64\") > 0) {\r\n                // read the pure ascii (removing the header)\r\n                let obj_base64 = this.props.chosen_phone_case.split('base64,')[1]\r\n                // convert the text to object type (ascii to binary)\r\n                obj_text = atob(obj_base64)\r\n                // send it off to be handled via handle_data() function\r\n                handle_data_pointer(obj_text, obj_parse_pointer, this_pointer, 'model.obj')\r\n            }\r\n            else {\r\n                // otherwise, as not having the ascii version of object file means we have just loded the obj file from\r\n                // server, we need to fetch said server data (in our case our own url, where the assets are)\r\n                let url = window.location.href.replace(/[^/]*$/, '') // remove any html files after directory\r\n                // console.log(\"URL is\", url)\r\n                url = url + '/assets/' + this.props.chosen_phone_case + \".obj\"\r\n                // let url = window.location.protocol + '//' + window.location.host + window.location.pathname + '/assets/' + this.props.chosen_phone_case + \".obj\"\r\n                //console.log(\"url is\", url)\r\n                //console.log(\"pathname\", window.location.pathname)\r\n                // fetch is used \r\n                fetch(url)\r\n                    .then(function (response) {\r\n                        //to extract the text from it\r\n                        return response.text();\r\n                    })\r\n                    .then(function (data) {\r\n                        // send for post processing and download \r\n                        handle_data_pointer(data, obj_parse_pointer, this_pointer, this_pointer.props.chosen_phone_case)\r\n                    })\r\n            }\r\n        }\r\n        else {\r\n            alert(\"Export format currently not supported!\")\r\n        }\r\n\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"export-control\">\r\n                <select className=\"select-3d\" onChange={this.props.on3DFormatSelect} value={this.props.chosen_3d_format} style={{\r\n                    backgroundImage: \"url(images/select-arrow.png)\",\r\n                    backgroundRepeat: 'no-repeat'\r\n                }}>\r\n                    <option value=\"\">Export Format</option>\r\n                    {this.props.export_3d_formats.map((format) => (\r\n                        <option key={format} value={format} >.{format}</option>\r\n                    ))}\r\n                </select>\r\n                <button ref=\"download\" className=\"exportButton\" onClick={() => this.clickHandler()}>Export 3D Model</button>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ExportControl\r\n","/*THis componenet renders vanilla header with logo and links \r\n\r\nDrop down menu for small screen devices uses this example\r\nhttps://blog.campvanilla.com/reactjs-dropdown-menus-b6e06ae3a8fe\r\nand is modified\r\n*/\r\n\r\nimport React from 'react';\r\n\r\nclass Header extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      showMenu: false,\r\n    };\r\n\r\n    this.showMenu = this.showMenu.bind(this);\r\n    this.closeMenu = this.closeMenu.bind(this);\r\n  }\r\n\r\n  showMenu(event) {\r\n    event.preventDefault();\r\n    this.setState({ showMenu: true }, () => {\r\n      document.addEventListener('click', this.closeMenu);\r\n    });\r\n  }\r\n\r\n  closeMenu(event) {\r\n    if (!this.dropdownMenu.contains(event.target)) {\r\n      this.setState({ showMenu: false }, () => {\r\n        document.removeEventListener('click', this.closeMenu);\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"header\">\r\n        <div className=\"logo\">\r\n          <img src=\"images/logo_white.png\" alt=\"Inkerz Logo\" className=\"logoImage\"></img>\r\n        </div>\r\n\r\n        <div className=\"nav-links\">\r\n          <a href=\"index.html\">3D MODELER</a>\r\n          <a href=\"https://inkerz.com\">WHY INKERZ?</a>\r\n          <a href=\"https://inkerz.com/contact/\">CONTACT</a>\r\n        </div>\r\n\r\n        <div className=\"menu-division\">\r\n          <img src=\"images/logo_white.png\" alt=\"Inkerz Logo\" className=\"menuLogoImage\"></img>\r\n          <button\r\n            className=\"menu-button\"\r\n            onClick={this.showMenu}\r\n            style={{ backgroundImage: \"url(images/menu-icon.png)\", backgroundRepeat: 'no-repeat' }}>\r\n          </button>\r\n          {\r\n            this.state.showMenu\r\n              ? (\r\n                <div\r\n                  className=\"menu\"\r\n                  ref={(element) => { this.dropdownMenu = element; }}>\r\n                  <a href=\"index.html\">\r\n                    <button className=\"menuItem\">3D MODELER</button>\r\n                  </a>\r\n                  <a href=\"https://inkerz.com\">\r\n                    <button className=\"menuItem\">WHY INKERZ?</button>\r\n                  </a>\r\n                  <a href=\"https://inkerz.com/contact/\">\r\n                    <button className=\"menuItem\">CONTACT</button>\r\n                  </a>\r\n                </div>\r\n              )\r\n              : (\r\n                null\r\n              )\r\n          }\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default Header\r\n","/*This component controls the 3D file loading. */\r\n\r\nimport React, { Component } from 'react'\r\nimport ReactFileReader from 'react-file-reader'\r\n\r\nclass LoadControl extends Component {\r\n\r\n    state = {\r\n        file: \"\",\r\n        fileExtension: \"\"\r\n    }\r\n\r\n    // this function extract the colour from the loded mtl file\r\n    // parsing all lines, effectively\r\n    // parsing each line fromm the mtl file format, finding\r\n    // newmtl file: material statement\r\n    // Kd line : color statement\r\n    // see: http://paulbourke.net/dataformats/mtl/\r\n    mtl_parse = mtl_text => {\r\n\r\n        let lines = mtl_text.split('\\n')\r\n\r\n        let materials = {}\r\n\r\n        let i = 0\r\n        let next_name = ''\r\n        let next_color = ''\r\n\r\n        while (i < lines.length) {\r\n            while (i < lines.length) {\r\n                if (lines[i] === undefined) {\r\n                    break\r\n                }\r\n                if (lines[i].startsWith('newmtl')) {\r\n                    next_name = lines[i].substring(6).trim()\r\n                    break\r\n                }\r\n                else {\r\n                    i++\r\n                    continue\r\n                }\r\n            }\r\n            if (next_name.length !== 0) {\r\n                while (i < lines.length) {\r\n                    if (lines[i] === undefined) {\r\n                        break\r\n                    }\r\n                    if (lines[i].startsWith('Kd')) {\r\n                        next_color = lines[i].substring(2).trim()\r\n                        break\r\n                    }\r\n                    else {\r\n                        i++\r\n                        continue\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                i++\r\n                continue\r\n            }\r\n            if (next_name.length !== 0 && next_color.length !== 0) {\r\n                materials[next_name] = next_color + ''\r\n                next_name = ''\r\n                next_color = ''\r\n                i++\r\n                continue\r\n            }\r\n            else {\r\n                i++\r\n                continue\r\n            }\r\n        }\r\n        console.log(JSON.stringify(materials))\r\n        return materials\r\n    }\r\n\r\n    // this function load the dataURI base64 string and forms the complete\r\n    // file definition, to be loaded into App.js on3DFileLoad() bound function\r\n    // note: file extension is fixed currently to obj.\r\n    on_obj_load = e => {\r\n\r\n        this.file = 'data:application/octet-stream;base64,' + btoa(this.obj_reader.result)\r\n        this.fileExtension = 'obj'\r\n\r\n        this.step = this.step + 1\r\n\r\n        //this\r\n        if (this.step >= 2) {\r\n            this.props.on3DFileLoad(this.file, this.fileExtension, this.color) //load file upstream to App.js \r\n        } else {\r\n            this.props.on3DFileLoad(this.file, this.fileExtension, this.props.app_states.chosen_case_colour) //load file upstream to App.js \r\n        }\r\n    }\r\n\r\n    // this function uses the result of read in mtl file read in and \r\n    // for colour and converts it to hex colour (as mtl file contains rgb colour definition)\r\n    // to be sent upstream to App.js on3DFileLoad() bound function together with state of the file\r\n    // and file extention\r\n    on_mtl_load = e => {\r\n\r\n        var mtl_string = this.mtl_reader.result\r\n\r\n        //var this_pointer = this\r\n\r\n\r\n        // console.log('mtl_string: ' + mtl_string)\r\n\r\n        let colors = this.mtl_parse(mtl_string)\r\n\r\n        let is_empty = Object.entries(colors).length === 0 && colors.constructor === Object\r\n\r\n        let color = '#'\r\n\r\n        if (!is_empty) {\r\n            let rgb = Object.entries(colors)[0][1]\r\n            let rgb_parts = rgb.split(' ')\r\n            for (let j = 0; j < 3; j++) {\r\n                color += (Math.round(parseFloat(rgb_parts[j].trim()) * 255) % 256).toString(16)\r\n            }\r\n        }\r\n        else {\r\n            color = '#000000'\r\n        }\r\n\r\n        this.color = color\r\n\r\n        console.log('handleFiles: ' + color)\r\n\r\n\r\n        this.step = this.step + 1\r\n\r\n        //this\r\n        if (this.step >= 2) {\r\n            this.props.on3DFileLoad(this.file, this.fileExtension, this.color) //load file upstream to App.js \r\n        }\r\n    }\r\n    \r\n    // function to handle files when user loads the files\r\n    handleFiles = files => {\r\n        this.step = 0\r\n        this.file = ''\r\n        this.fileExtension = ''\r\n        this.color = ''\r\n\r\n        var mtl_ready = false\r\n        var obj_ready = false\r\n        var obj_order = -1\r\n        var mtl_order = -1\r\n\r\n        // currently we expect both .mtl and .obj files\r\n        if (files.length < 2) {\r\n            //var color = '#'\r\n            // each file is parswed to identifyy extention and make them marked as ready\r\n            for (let i = 0; i < files.length; i++) {\r\n                // console.log(files[i].name)\r\n                // console.log(files[i].name.split('.').pop() === 'mtl' && !mtl_ready)\r\n                // console.log(files[i].name.split('.').pop() === 'obj' && !obj_ready)\r\n                if (files[i].name.split('.').pop() === 'obj' && !obj_ready) {\r\n                    // console.log('obj: ' + files[i].name)\r\n                    //console.log(files[i].base64[i]) /* remove just for logging */\r\n                    obj_order = i;\r\n                    obj_ready = true;\r\n                    alert(\".mtl file has not been loaded, using default material\")\r\n                    continue\r\n                } else {\r\n                    alert(\"Unsupported file detected\")\r\n                }\r\n            }\r\n\r\n            this.obj_reader = new FileReader();\r\n            this.obj_reader.onloadend = this.on_obj_load\r\n            this.obj_reader.readAsText(files[obj_order])\r\n        }\r\n        // if both supplied, process both files (encoding obj file into stream base 64 \r\n        // and extract material reference and colour from mtl file)\r\n        else {\r\n            //var color = '#'\r\n            // each file is parswed to identifyy extention and make them marked as ready\r\n            for (let i = 0; i < files.length; i++) {\r\n                // console.log(files[i].name)\r\n                // console.log(files[i].name.split('.').pop() === 'mtl' && !mtl_ready)\r\n                // console.log(files[i].name.split('.').pop() === 'obj' && !obj_ready)\r\n                if (files[i].name.split('.').pop() === 'obj' && !obj_ready) {\r\n                    // console.log('obj: ' + files[i].name)\r\n                    //console.log(files[i].base64[i]) /* remove just for logging */\r\n                    obj_order = i;\r\n                    obj_ready = true;\r\n                    continue\r\n                }\r\n                if (files[i].name.split('.').pop() === 'mtl' && !mtl_ready) {\r\n                    // console.log('mtl: ' + files[i].name)\r\n                    mtl_order = i;\r\n                    mtl_ready = true;\r\n                }\r\n            }\r\n            // once both files are reqady, they are read in\r\n            this.mtl_reader = new FileReader();\r\n            this.obj_reader = new FileReader();\r\n            // object encoding into base64 stream, and mtl extraction of \r\n            // material and colour\r\n            // this is triggered using the FileLoader ability to\r\n            // load the function on \"onloadend\" trigger event\r\n            //  files as stepped loaded in (.mtl then .obj), read in as text (ascii)\r\n            // then sent off for processing via on_mtl_load and obj_load functions\r\n            this.mtl_reader.onloadend = this.on_mtl_load\r\n            this.obj_reader.onloadend = this.on_obj_load\r\n            this.mtl_reader.readAsText(files[mtl_order])\r\n            this.obj_reader.readAsText(files[obj_order])\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"load-control\">\r\n                <ReactFileReader fileTypes={[\".obj\", \".json\", \".mtl\"]} multipleFiles={true} base64={false} handleFiles={this.handleFiles}>\r\n                    <button className=\"loadButton\">Load 3D Model</button>\r\n                </ReactFileReader>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default LoadControl\r\n","/* This componenet resets all the relevant values modified by the user\r\nreseting the modifiable values in App.js (states) */\r\n\r\nimport React from 'react';\r\n\r\nfunction ResetControl(props) {\r\n    return (\r\n\r\n        <div className=\"reset-control\">\r\n            <button className=\"resetButton\" onClick={props.onResetApp}>Reset</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ResetControl\r\n","/* This component renders case 3D object\r\n\r\nIt uses number of modules for Threejs to make it ewasier to\r\nintegrate React and ThrreJS, namely react-three-renderer as\r\nfor rendering and react-three-renderer-objects for object loading\r\n\r\n*/\r\n\r\nimport * as THREE from \"three\";\r\nimport React from \"react\";\r\nimport React3 from \"react-three-renderer\";\r\nimport ObjectModel from 'react-three-renderer-objects';\r\n\r\n\r\nclass DemoScene extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      cameraPosition: new THREE.Vector3(0, 300, 750),\r\n      groupRotation: new THREE.Euler(0, 0, 0),\r\n      scene: {},\r\n      width: 500,\r\n      height: 400,\r\n      RenderInfo: \"\",\r\n      assets_path: \"assets/\"\r\n    }\r\n    // this.objectLoadLogic = this.objectLoadLogic.bind()\r\n  }\r\n\r\n  objectLoadLogic() {\r\n    // if we detect an object as string, with substring base64, then load it as is\r\n    if (this.props.chosenPhoneCase.indexOf(\"base64\") > 0) {\r\n      return this.props.chosenPhoneCase\r\n    }\r\n    // otherwise we need to load it from file system, \r\n    // including the full asset path under public/assets folder\r\n    else {\r\n      return (this.state.assets_path + this.props.chosenPhoneCase + \".obj\")\r\n    }\r\n  }\r\n\r\n  objectLabelDisplayLogic() {\r\n    // if we detect an object as string, with substring base64, mark it with\r\n    // laber of customer loaded\r\n    if (this.props.chosenPhoneCase.indexOf(\"base64\") > 0) {\r\n      return \"Customer\"\r\n    }\r\n    // otherwise we need to load it from file system, \r\n    // including the full asset path under public/assets folder\r\n    // label it as such\r\n    else {\r\n      return this.props.chosenPhoneCase\r\n    }\r\n  }\r\n\r\n  /* when component mounts (renders), we set thescene and track the \r\n  window resize */\r\n  componentDidMount() {\r\n    let { scene } = this.refs;\r\n    this.setState({ scene });\r\n    //detect window resiez and perform resize function\r\n\r\n    this.resize();\r\n\r\n    window.addEventListener(\"resize\", this.resize.bind(this));\r\n  }\r\n\r\n  resize() {\r\n\r\n    if (window.innerWidth < 640) {\r\n      //adjust render size\r\n      this.setState({ width: window.innerWidth * 0.7 });\r\n      this.setState({ height: 300 });\r\n    } else {\r\n      //adjust render size\r\n      this.setState({ width: window.innerWidth - 350 });\r\n      this.setState({ height: 400 });\r\n    }\r\n  }\r\n\r\n  // This is the react rendering the 3D object\r\n  render() {\r\n    return (\r\n      <div>\r\n        <React3\r\n          mainCamera=\"camera\"\r\n          antialias\r\n          shadowMapEnabled\r\n          width={this.state.width}\r\n          height={this.state.height}\r\n          alpha={true}\r\n        >\r\n          <scene ref=\"scene\">\r\n            <perspectiveCamera\r\n              key={`perspectiveCamera`}\r\n              name=\"camera\"\r\n              fov={parseInt(this.props.chosenCaseSize, 10)}\r\n              aspect={this.state.width / this.state.height}\r\n              near={0.1}\r\n              far={1000}\r\n              position={this.state.cameraPosition}\r\n              lookAt={new THREE.Vector3(0, 0, 0)}\r\n            />\r\n            <group>\r\n              <spotLight\r\n                key={`Light 1`}\r\n                color={this.props.chosenCaseColor}\r\n                position={new THREE.Vector3(0, 300, 0)}\r\n                lookAt={new THREE.Vector3(0, 0, 0)}\r\n                castShadow\r\n                penumbra={2}\r\n                intensity={0.2}\r\n                shadowMapWidth={10240}\r\n                shadowMapHeight={10240}\r\n              />\r\n\r\n              <directionalLight\r\n                key={`Light 2`}\r\n                color={this.props.chosenCaseColor}\r\n                position={new THREE.Vector3(0, 500, 100)}\r\n                lookAt={new THREE.Vector3(0, 0, 0)}\r\n                intensity={0.5}\r\n              />\r\n\r\n              <spotLight\r\n                key={`Light 3`}\r\n                color={this.props.chosenCaseColor}\r\n                position={new THREE.Vector3(0, 100, 2000)}\r\n                lookAt={new THREE.Vector3(0, 0, 0)}\r\n                intensity={0.35}\r\n              />\r\n\r\n              <spotLight\r\n                key={`Light 4`}\r\n                color={this.props.chosenCaseColor}\r\n                position={new THREE.Vector3(-500, 0, 500)}\r\n                lookAt={new THREE.Vector3(0, 0, 0)}\r\n                intensity={0.1}\r\n              />\r\n\r\n              <spotLight\r\n                key={`Light 5`}\r\n                color={this.props.chosenCaseColor}\r\n                position={new THREE.Vector3(500, 0, 500)}\r\n                lookAt={new THREE.Vector3(0, 0, 0)}\r\n                intensity={0.1}\r\n              />\r\n\r\n              <spotLight\r\n                key={`Light 6`}\r\n                color={this.props.chosenCaseColor}\r\n                position={new THREE.Vector3(-500, 450, 500)}\r\n                lookAt={new THREE.Vector3(0, 0, 0)}\r\n                intensity={0.375}\r\n              />\r\n\r\n              <spotLight\r\n                key={`Light 7`}\r\n                color={this.props.chosenCaseColor}\r\n                position={new THREE.Vector3(500, 450, 500)}\r\n                lookAt={new THREE.Vector3(0, 0, 0)}\r\n                intensity={0.375}\r\n              />\r\n            </group>\r\n\r\n            <group name=\"objGroup\" rotation={new THREE.Euler(this.props.chosenRotationX, this.props.chosenRotationY, 0)}\r\n              //change key when model changes so that it gets re-rendered\r\n              key={this.props.chosenPhoneCase}>\r\n              <ObjectModel\r\n                name=\"exampleObject\"\r\n                //this is the model we are rendering\r\n                model={this.objectLoadLogic()}\r\n                scene={this.state.scene}\r\n                group=\"objGroup\"\r\n              />\r\n              {/* {console.log(\"model is:\", this.objectLoadLogic())} */}\r\n            </group>\r\n          </scene>\r\n        </React3>\r\n        <div className=\"renderDescription\">\r\n          <p>{\"Rendering \" + this.objectLabelDisplayLogic() + \" Model\"}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DemoScene;\r\n","/* This compoenet (a class) is used as wrapping control section for rotation\r\nand zooming 3D object controls.\r\n\r\nIt paseses the required states from App.js to DemoScene.js (component)\r\nto render the 3D object\r\n\r\n*/\r\n\r\nimport React from 'react';\r\nimport DemoScene from './DemoScene';\r\n\r\nclass Main3DView extends React.Component {\r\n\r\n    changeSize() {\r\n        let value = document.getElementById(\"caseSizeRange\").value\r\n        this.props.onZoomChange(value)\r\n    }\r\n\r\n    changeRotationX() {\r\n        let value = document.getElementById(\"rotationXRange\").value\r\n        this.props.onRotationXChange(value)\r\n    }\r\n\r\n    changeRotationY() {\r\n        let value = document.getElementById(\"rotationYRange\").value\r\n        this.props.onRotationYChange(value)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"main3D\">\r\n                <br></br>\r\n                <div className=\"fileViewerLine\">\r\n                    <div className=\"caseSize\">\r\n\r\n                        <p className=\"whiteText\">\r\n\r\n                            Z<br />\r\n                            O<br />\r\n                            O<br />\r\n                            M<br />\r\n                        </p>\r\n\r\n                        <div className=\"rangeDiv\">\r\n                            <input type=\"range\" id=\"caseSizeRange\" min=\"1\" max=\"50\" step=\"1\" value={this.props.app_states.displayed_3d_model_zoom_level} onChange={() => this.changeSize()} />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"fileViewer\" style={{ backgroundImage: \"url(images/model-background.png)\", backgroundRepeat: 'no-repeat' }}>\r\n\r\n                        <DemoScene\r\n                            chosenCaseColor={this.props.app_states.chosen_case_colour}\r\n                            chosenCaseSize={this.props.app_states.displayed_3d_model_zoom_level}\r\n                            chosenRotationX={this.props.app_states.displayed_3d_model_rotation_x}\r\n                            chosenRotationY={this.props.app_states.displayed_3d_model_rotation_y}\r\n                            chosenPhoneCase={this.props.app_states.chosen_phone_case}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"rotationX\">\r\n\r\n                        <div className=\"rangeDiv\">\r\n                            <input type=\"range\" id=\"rotationXRange\" min=\"-3\" max=\"3\" step=\"0.1\" value={this.props.app_states.displayed_3d_model_rotation_x} onChange={() => this.changeRotationX()} />\r\n                        </div>\r\n                        <p className=\"whiteText\">\r\n\r\n                            R<br />\r\n                            O<br />\r\n                            T<br />\r\n                            A<br />\r\n                            T<br />\r\n                            E<br />\r\n                        </p>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"rotationY\">\r\n                    <input type=\"range\" id=\"rotationYRange\" min=\"-3\" max=\"3\" step=\"0.1\" value={this.props.app_states.displayed_3d_model_rotation_y} onChange={() => this.changeRotationY()}></input>\r\n\r\n                    <p className=\"whiteText\">ROTATE</p>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Main3DView\r\n","/* This component controls the input of the engraving text for the chosen case.\r\n onChange={props.onEngraveTextChange} updates the chosen_engraved_text in App.js*/\r\n\r\nimport React from 'react';\r\n\r\nfunction TextEngraving(props) {\r\n    return (\r\n        <div>\r\n            <div>\r\n                <label htmlFor=\"text-to-engrave\">\r\n                    <p className=\"whiteText\">What to engrave into case?</p>\r\n                </label>\r\n                <input\r\n                    id=\"text-to-engrave\"\r\n                    className=\"engrave-3d\"\r\n                    onChange={props.onEngraveTextChange}\r\n                    value={props.engraved} placeholder=\"Text to Engrave...\"\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default TextEngraving\r\n","/*This component embeds the colour wheen into the page (color-picker module). \r\nonChangeComplete={props.onCaseColourSelect} updates the chosen_case_colour state\r\nback to App.js*/\r\n\r\n/* example take from https://casesandberg.github.io/react-color/ and modified*/\r\n\r\nimport React from 'react'\r\nimport reactCSS from 'reactcss'\r\nimport { ChromePicker } from 'react-color'\r\n\r\nclass CaseColourPicker extends React.Component {\r\n    state = {\r\n        displayColorPicker: false,\r\n        color: this.props.updated_case_colour\r\n    };\r\n\r\n    handleClick = () => {\r\n        this.setState({ displayColorPicker: !this.state.displayColorPicker })\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({ displayColorPicker: false })\r\n    };\r\n\r\n    handleChange = (color) => {\r\n        this.setState({\r\n            color: color\r\n        })\r\n\r\n    };\r\n\r\n    render() {\r\n\r\n        const styles = reactCSS({\r\n            'default': {\r\n                color: {\r\n                    width: '30px',\r\n                    height: '14px',\r\n                    borderRadius: '2px',\r\n                    background: this.props.updated_case_colour,\r\n                },\r\n                swatch: {\r\n                    padding: '5px',\r\n                    background: '#fff',\r\n                    borderRadius: '1px',\r\n                    boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\r\n                    display: 'inline-block',\r\n                    cursor: 'pointer',\r\n                },\r\n                popover: {\r\n                    position: 'absolute',\r\n                    zIndex: '2',\r\n                },\r\n                cover: {\r\n                    position: 'fixed',\r\n                    top: '0px',\r\n                    right: '0px',\r\n                    bottom: '0px',\r\n                    left: '0px',\r\n                },\r\n            },\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <p className=\"whiteText\">Select Case Colour:</p>\r\n                <div style={styles.swatch} onClick={this.handleClick}>\r\n                    <div style={styles.color} />\r\n                </div>\r\n                {this.state.displayColorPicker ? <div style={styles.popover}>\r\n                    <div style={styles.cover} onClick={this.handleClose} />\r\n                    <ChromePicker\r\n                        disableAlpha={true}\r\n                        width=\"190px\"\r\n                        onChange={this.handleChange}\r\n                        color={this.props.updated_case_colour}\r\n                        onChangeComplete={this.props.onCaseColourSelect}\r\n                    >\r\n                    </ChromePicker>\r\n                </div> : null}\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CaseColourPicker\r\n","/* This compoenet (a class) uses case list (available_case_models)\r\nfrom App.js in building a searchable text input, for user to find\r\na case to model.\r\n\r\nIt uses states to manipulate case list array, for showing and filtering.\r\n\r\nthis.props.onCaseSelect(phone_case) function updates the chosen_phone_case\r\nproperty in App.js (state)\r\n\r\n*/\r\n\r\nimport React, { Component } from 'react';\r\n\r\nclass CaseSelection extends Component {\r\n    /*class constructor */\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        /* App state*/\r\n        this.state = {\r\n            caseList: this.props.case_list,\r\n            searchString: ''\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <div>\r\n                {/* caseList - show/renders cases with background photo and button name/value*/}\r\n                {\r\n                this.props.case_list.filter((phone_case) => phone_case.toLowerCase().includes(this.props.searched.toLowerCase())).map((phone_case) => (\r\n                    <button className=\"displayCaseButton\"\r\n                    key={phone_case}\r\n                    value={phone_case}\r\n                    onClick={() => {this.props.onCaseSelect(phone_case); this.props.onClear(\"\")}}>\r\n                    <div className=\"cardBox\">\r\n                        <div className=\"card\">\r\n                            <div className=\"card-front\">\r\n                                <img src={'images/'+phone_case+'.png'} alt=\"\" className=\"displayCaseImage\"/>\r\n                            </div>\r\n                            <div className=\"card-back\">\r\n                                <p>{phone_case}</p> \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    </button>\r\n                    ))\r\n                }\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default CaseSelection\r\n","/*This component controls case search field*/\r\n\r\nimport React from 'react';\r\n\r\nfunction SeachControl(props) {\r\n    \r\n    return (\r\n        <div className=\"search-control\"> \r\n            <input\r\n            id=\"text-to-search\"\r\n             className=\"search-3d\"\r\n            onChange={props.onCaseSearch}\r\n            value={props.searched} \r\n            placeholder=\"Search Case...\"\r\n            style={{backgroundImage: \"url(images/search-icon.png)\",\r\n            backgroundRepeat: 'no-repeat'}}\r\n        />      \r\n        <button className=\"clearButton\" onClick={() => props.onClear(\"\")}>X</button>\r\n            \r\n        </div>\r\n        )\r\n    }\r\n\r\nexport default SeachControl\r\n","// other components import\r\nimport React, { Component } from 'react';\r\nimport Header from './components/Header'\r\nimport LoadControl from './components/LoadControl'\r\nimport ExportControl from './components/ExportControl'\r\nimport ResetControl from './components/ResetControl'\r\nimport Main3DView from './components/Main3DView'\r\nimport TextEngraving from './components/TextEngraving'\r\nimport CaseColourPicker from './components/CaseColourPicker'\r\nimport CaseSelection from './components/CaseSelection'\r\nimport SearchControl from './components/SearchControl'\r\n\r\nclass App extends Component {\r\n    /* Constructor */\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        /* App state*/\r\n        this.state = {\r\n            chosen_engraved_text: '',\r\n            case_search_string: '',\r\n            chosen_case_colour: '#44557E',\r\n            chosen_phone_case: 'iPhone-X',\r\n            chosen_export_3d_format: '',\r\n            chosen_3d_file_extension: '',\r\n            displayed_3d_model_rotation_x: 0,\r\n            displayed_3d_model_rotation_y: 0,\r\n            displayed_3d_model_zoom_level: 20,\r\n            available_export_3d_formats: ['OBJ', 'GLB'],\r\n            available_case_models: ['iPhone-X', 'iPhone-8-Plus', 'iPhone-7', 'iPad-9.7', 'Galaxy-S10', 'Galaxy-S5', 'Pixel2XL'],\r\n        }\r\n\r\n        /* section to bind functions to local class context */\r\n        this.update3DExportFormat = this.update3DExportFormat.bind(this)\r\n        this.updateEngravingText = this.updateEngravingText.bind(this)\r\n        this.updateCaseColour = this.updateCaseColour.bind(this)\r\n        this.updateChosenCase = this.updateChosenCase.bind(this)\r\n        this.updateChosen3DFileToLoad = this.updateChosen3DFileToLoad.bind(this)\r\n        this.resetApp = this.resetApp.bind(this)\r\n        this.updateSearchString = this.updateSearchString.bind(this)\r\n        this.clearSearchString = this.clearSearchString.bind(this)\r\n        this.updateDisplayed3DModelRotationX = this.updateDisplayed3DModelRotationX.bind(this)\r\n        this.updateDisplayed3DModelRotationY = this.updateDisplayed3DModelRotationY.bind(this)\r\n        this.updateDisplayed3DModelZoom = this.updateDisplayed3DModelZoom.bind(this)\r\n\r\n    }\r\n    /* Updates chosen_export_3d_format App state property based on return\r\n     event target value*/\r\n    update3DExportFormat(e) {\r\n        this.setState({ chosen_export_3d_format: e.target.value })\r\n    }\r\n    /* Resets App to chosen default values (empty) */\r\n    resetApp() {\r\n        this.setState({\r\n            chosen_engraved_text: '',\r\n            case_search_string: '',\r\n            chosen_case_colour: '#44557E',\r\n            chosen_export_3d_format: '',\r\n            chosen_phone_case: 'iPhone-X',\r\n            displayed_3d_model_rotation_x: 0,\r\n            displayed_3d_model_rotation_y: 0,\r\n            displayed_3d_model_zoom_level: 20,\r\n        })\r\n    }\r\n    // updates engraved text state property, based on return event target value\r\n    updateEngravingText(e) {\r\n        this.setState({ chosen_engraved_text: e.target.value })\r\n    }\r\n    // updates case colour state proiperty, based on return event target value\r\n    updateCaseColour(color) {\r\n        this.setState({ chosen_case_colour: color.hex })\r\n    }\r\n    // updates chose case state property, based on return event target value\r\n    updateChosenCase(e) {\r\n        this.setState({ chosen_phone_case: e })\r\n    }\r\n    // updates loaded 3D file file and extention state property, based on return event target value\r\n    updateChosen3DFileToLoad(file, fileExtension, color) {\r\n        this.setState({ chosen_phone_case: file })\r\n        this.setState({ chosen_3d_file_extension: fileExtension })\r\n        if (color === '#GGGGGG') {\r\n\r\n        }\r\n        else {\r\n            this.setState({ chosen_case_colour: color })\r\n        }\r\n    }\r\n    // updates case search string, based on return event target value\r\n    updateSearchString(e) {\r\n        this.setState({ case_search_string: e.target.value })\r\n    }\r\n    // clears case search string, based on return event target value\r\n    clearSearchString(e) {\r\n        this.setState({ case_search_string: e })\r\n    }\r\n    // updates 3D model rotationX values\r\n    updateDisplayed3DModelRotationX(value) {\r\n        this.setState({\r\n            displayed_3d_model_rotation_x: value\r\n        })\r\n    }\r\n    // updates 3D model rotationY values\r\n    updateDisplayed3DModelRotationY(value) {\r\n        this.setState({\r\n            displayed_3d_model_rotation_y: value\r\n        })\r\n    }\r\n    // updates 3D model Zoom values\r\n    updateDisplayed3DModelZoom(value) {\r\n        this.setState({\r\n            displayed_3d_model_zoom_level: value\r\n        })\r\n    }\r\n\r\n    /* App JSX render section. Works together with index.css in\r\n     producing a layout (based on grid css*/\r\n    render() {\r\n        return (\r\n            <div className=\"app\" >\r\n                <Header />\r\n                <div className=\"top-controls\">\r\n                    <LoadControl on3DFileLoad={this.updateChosen3DFileToLoad}\r\n                        app_states={this.state}\r\n                    />\r\n\r\n                    <ExportControl\r\n                        export_3d_formats={this.state.available_export_3d_formats}\r\n                        chosen_3d_format={this.state.chosen_export_3d_format}\r\n                        on3DFormatSelect={this.update3DExportFormat}\r\n                        chosen_phone_case={this.state.chosen_phone_case}\r\n                        chosen_case_colour={this.state.chosen_case_colour}\r\n                    // app_states={this.state}\r\n                    />\r\n\r\n                    <ResetControl onResetApp={this.resetApp} />\r\n\r\n                    <SearchControl\r\n                        searched={this.state.case_search_string}\r\n                        onCaseSearch={this.updateSearchString}\r\n                        onClear={this.clearSearchString} />\r\n\r\n                </div>\r\n                <div className=\"view3d\">\r\n                    <CaseSelection\r\n                        onCaseSelect={this.updateChosenCase}\r\n                        case_list={this.state.available_case_models}\r\n                        searched={this.state.case_search_string}\r\n                        onClear={this.clearSearchString}\r\n                    />\r\n\r\n                    <Main3DView\r\n                        app_states={this.state}\r\n                        onRotationXChange={this.updateDisplayed3DModelRotationX}\r\n                        onRotationYChange={this.updateDisplayed3DModelRotationY}\r\n                        onZoomChange={this.updateDisplayed3DModelZoom} />\r\n                </div>\r\n                <div className=\"edit-controls\">\r\n                    <TextEngraving\r\n                        engraved={this.state.chosen_engraved_text}\r\n                        onEngraveTextChange={this.updateEngravingText}\r\n                    />\r\n                    <CaseColourPicker\r\n                        onCaseColourSelect={this.updateCaseColour}\r\n                        updated_case_colour={this.state.chosen_case_colour}\r\n                    />\r\n                </div>\r\n            </div >\r\n        );\r\n    }\r\n}\r\n\r\n/* Export App */\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport registerServiceWorker from './registerServiceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}